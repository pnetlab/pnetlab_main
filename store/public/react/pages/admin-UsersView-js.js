(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{635:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=(n(521),n(522)),l=n(95),i=n(91),s=n(92),c=(n(209),n(597),n(523)),u=n(598),p=n(524),d=n(93),E=n(94),f=n(599),m=n(212),_=n(602),h=n(742),b=(n(596),n(6)),S=(n(208),n(729));function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e){return(g="function"==typeof Symbol&&"symbol"===O(Symbol.iterator)?function(e){return O(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":O(e)})(e)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(e,n){var a,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(a=!(o=N(t).call(this,e,n))||"object"!==g(o)&&"function"!=typeof o?R(r):o).id=makeId(),a.table=a.context,a.table.children.FuncEditOffUser=R(a),a.state={role:""},a.rowData={},a}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,e),n=t,(a=[{key:"modal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"show";"hide"==e?$("#file_mng_modal"+this.id).modal("hide"):$("#file_mng_modal"+this.id).modal()}},{key:"setData",value:function(e){var t=this;this.setState({role:get(e[USER_ROLE],"")},(function(){t.getRole().then((function(){t.rowData=e,t.roleInput.setValue(e[USER_ROLE]),t.noteInput.setValue(e[USER_NOTE]),t.statusInput&&t.statusInput.setValue(e[USER_STATUS]),t.activeInput&&t.activeInput.setValue(e[USER_ACTIVE_TIME]),t.expiredInput&&t.expiredInput.setValue(e[USER_EXPIRED_TIME]),t.maxNodeInput&&t.maxNodeInput.setValue(e[USER_MAX_NODE]),t.maxNodeLabInput&&t.maxNodeLabInput.setValue(e[USER_MAX_NODELAB]),t.workspaceInput&&t.workspaceInput.setWorkSpace(e[USER_WORKSPACE])}))}))}},{key:"render",value:function(){var e,t,n,a,o,l,i,s=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal fade",id:"file_mng_modal"+this.id},r.a.createElement("div",{className:"modal-dialog modal-lg modal-dialog-centered"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("strong",null,lang("Add Users")),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},"×")),r.a.createElement("div",{className:"modal-body",style:{textAlign:"initial"}},r.a.createElement("div",{style:{padding:7}},r.a.createElement("div",null,r.a.createElement("div",{style:{margin:"10px 0px"},title:lang("Role")},r.a.createElement(b.a,{className:"input_item_input",ref:function(e){return s.roleInput=e},placeholder:lang("Role"),struct:(e={},T(e,INPUT_TYPE,"select"),T(e,INPUT_NULL,!1),T(e,INPUT_OPTION,get(this.table[STRUCT_EDIT][USER_ROLE][EDIT_OPTION],[])),T(e,INPUT_ONCHANGE,(function(e,t){s.setState({role:t.getValue()},(function(){return s.getRole()}))})),e)})),0==this.state.role?"":r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{margin:"10px 0px"},title:lang("Status")},r.a.createElement(b.a,{className:"input_item_input",ref:function(e){return s.statusInput=e},placeholder:lang("Status"),struct:(t={},T(t,INPUT_TYPE,"select"),T(t,INPUT_NULL,!0),T(t,INPUT_OPTION,get(this.table[STRUCT_EDIT][USER_STATUS][EDIT_OPTION],[])),T(t,INPUT_DEFAULT,"1"),t)})),r.a.createElement("div",{style:{margin:"10px 0px"},title:lang("Active Time")},r.a.createElement(b.a,{className:"input_item_input",ref:function(e){return s.activeInput=e},placeholder:lang("Active Time"),struct:(n={},T(n,INPUT_TYPE,"date"),T(n,INPUT_NULL,!0),T(n,INPUT_FORMAT,"llll"),n)})),r.a.createElement("div",{style:{margin:"10px 0px"},title:lang("Expired Time")},r.a.createElement(b.a,{className:"input_item_input",ref:function(e){return s.expiredInput=e},placeholder:lang("Expired Time"),struct:(a={},T(a,INPUT_TYPE,"date"),T(a,INPUT_NULL,!0),T(a,INPUT_FORMAT,"llll"),a)})),r.a.createElement("div",null,r.a.createElement("strong",null,lang("Workspace")),r.a.createElement("p",null,lang("workspace_des")),r.a.createElement(S.a,{ref:function(e){return s.workspaceInput=e},except:["Your labs from PNETLab Store"],link:"/store/public/admin/default/folder",folder:"/opt/unetlab/labs"})),r.a.createElement("div",{style:{margin:"10px 0px"},title:lang(USER_MAX_NODE)},r.a.createElement(b.a,{min:0,className:"input_item_input",ref:function(e){return s.maxNodeInput=e},placeholder:lang(USER_MAX_NODE),struct:(o={},T(o,INPUT_TYPE,"number"),T(o,INPUT_NULL,!0),o)})),r.a.createElement("div",{style:{margin:"10px 0px"},title:lang(USER_MAX_NODELAB)},r.a.createElement(b.a,{min:0,className:"input_item_input",ref:function(e){return s.maxNodeLabInput=e},placeholder:lang(USER_MAX_NODELAB),struct:(l={},T(l,INPUT_TYPE,"number"),T(l,INPUT_NULL,!0),l)}))),r.a.createElement("div",{style:{margin:"10px 0px"},title:"Note"},r.a.createElement(b.a,{className:"input_item_input",ref:function(e){return s.noteInput=e},placeholder:"Note",struct:(i={},T(i,INPUT_TYPE,"textarea"),T(i,INPUT_NULL,!0),i)}))))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){s.editUser()}},lang("Save")),r.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal"},lang("Cancel")))))))}},{key:"getRole",value:function(){var e=this;return App.loading(!0),axios.request({url:"/store/public/admin/user_roles/read",method:"post",data:{data:[T({},USER_ROLE_ID,this.state.role)]}}).then((function(t){if(t=t.data,App.loading(!1),t.result){if(isset(t.data[0])){var n=t.data[0],a=get(n[USER_ROLE_WORKSPACE],"");e.workspaceInput.setFolder("/opt/unetlab/labs"+a)}}else error_handle(t)})).catch((function(e){App.loading(!1),error_handle(e)}))}},{key:"editUser",value:function(){var e,t,n=this,a=this.noteInput.getValue(),r=this.roleInput.getValue();if(null!==r){var o="1";this.statusInput&&(o=this.statusInput.getValue());var l="";this.activeInput&&(l=this.activeInput.getValue());var i="";this.expiredInput&&(i=this.expiredInput.getValue());var s="";this.workspaceInput&&(s=this.workspaceInput.getWorkSpace());var c="";this.maxNodeInput&&(c=this.maxNodeInput.getValue());var u="";this.maxNodeLabInput&&(u=this.maxNodeLabInput.getValue()),this.table.editRow((t={},T(t,DATA_KEY,[T({},USER_POD,this.rowData[USER_POD])]),T(t,DATA_EDITOR,(e={},T(e,USER_ROLE,r),T(e,USER_STATUS,o),T(e,USER_ACTIVE_TIME,l),T(e,USER_EXPIRED_TIME,i),T(e,USER_WORKSPACE,s),T(e,USER_NOTE,a),T(e,USER_MAX_NODE,c),T(e,USER_MAX_NODELAB,u),e)),t)).then((function(e){e.result?(n.modal("hide"),n.table.filter()):error_handle(e)}))}}}])&&y(n.prototype,a),o&&y(n,o),t}(a.Component);v.contextType=TableContext;var A=v;function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e){return(L="function"==typeof Symbol&&"symbol"===U(Symbol.iterator)?function(e){return U(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":U(e)})(e)}function D(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=function(e){function t(e){var n,a,o,l,i,s,c,u,p,d,E,f,m,_,h,b,S,O,g,T,y,N,R,I,v,A,U,D,w,M,x,F,j,Y,W;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Y=this,W=P(t).call(this,e),(j=!W||"object"!==L(W)&&"function"!=typeof W?k(Y):W).users_struct={},j.users_struct[STRUCT_FILTERS]={},j.users_struct[STRUCT_COLUMNS]=(C(S={},USER_USERNAME,(C(n={},COL_NAME,lang(USER_USERNAME)),C(n,COL_SORT,!1),C(n,COL_DECORATOR_IN,(function(e,t,n){var a=n[t];return 1==a[USER_OFFLINE]?r.a.createElement("span",{title:"Offline Account"},r.a.createElement("i",{className:"fa fa-map-marker",style:{color:"red",fontSize:16}})," ",formatName(a[USER_USERNAME])):r.a.createElement("span",{title:"Online Account"},r.a.createElement("i",{className:"fa fa-globe",style:{color:"#4caf50"}})," ",formatName(a[USER_USERNAME]))})),C(n,COL_STYLE,{whiteSpace:"nowrap"}),n)),C(S,USER_EMAIL,(C(a={},COL_NAME,lang(USER_EMAIL)),C(a,COL_SORT,!0),a)),C(S,USER_IP,(C(o={},COL_NAME,lang(USER_IP)),C(o,COL_SORT,!1),C(o,COL_DECORATOR_IN,(function(e){return HtmlDecode(e)})),o)),C(S,USER_ROLE,(C(l={},COL_NAME,lang(USER_ROLE)),C(l,COL_SORT,!1),l)),C(S,USER_FOLDER,(C(i={},COL_NAME,lang(USER_FOLDER)),C(i,COL_SORT,!1),C(i,COL_DECORATOR_IN,(function(e){return HtmlDecode(e)})),C(i,COL_STYLE,{whiteSpace:"nowrap"}),i)),C(S,USER_WORKSPACE,(C(s={},COL_NAME,lang(USER_WORKSPACE)),C(s,COL_SORT,!1),C(s,COL_DECORATOR_IN,(function(e){return HtmlDecode(e)})),C(s,COL_STYLE,{whiteSpace:"nowrap"}),s)),C(S,USER_ONLINE_TIME,(C(c={},COL_NAME,lang(USER_ONLINE_TIME)),C(c,COL_SORT,!0),C(c,COL_DECORATOR_IN,(function(e){var t=moment().format("X"),n=Number(t)-Number(e),a=moment(e,"X").format("llll");return"Invalid date"==a&&(a=""),n<600?r.a.createElement("span",{style:{textAlign:"left"}},r.a.createElement("i",{title:"Online: "+a,className:"fa fa-circle",style:{color:"#4caf50",cursor:"pointer"}})," ",a):r.a.createElement("span",{style:{textAlign:"left"}},r.a.createElement("i",{title:"Offline: "+a,className:"fa fa-circle",style:{color:"red",cursor:"pointer"}})," ",a)})),C(c,COL_STYLE,{whiteSpace:"nowrap"}),c)),C(S,USER_STATUS,(C(u={},COL_NAME,lang(USER_STATUS)),C(u,COL_SORT,!0),C(u,COL_DECORATOR_IN,(function(e){return e==USER_STATUS_BLOCK?r.a.createElement("b",{style:{color:"red"}},"Block"):r.a.createElement("b",{style:{color:"#4caf50"}},"Active")})),u)),C(S,USER_ACTIVE_TIME,(C(p={},COL_NAME,lang(USER_ACTIVE_TIME)),C(p,COL_SORT,!0),C(p,COL_DECORATOR_IN,(function(e){return moment(e,"X").format("llll")})),C(p,COL_STYLE,{whiteSpace:"nowrap"}),p)),C(S,USER_EXPIRED_TIME,(C(d={},COL_NAME,lang(USER_EXPIRED_TIME)),C(d,COL_SORT,!0),C(d,COL_DECORATOR_IN,(function(e){return moment(e,"X").format("llll")})),C(d,COL_STYLE,{whiteSpace:"nowrap"}),d)),C(S,"ram_limit",(C(E={},COL_NAME,"RAM Limit"),C(E,COL_SORT,!0),C(E,COL_DECORATOR_IN,(function(e,t,n){var a=n[t][USER_POD],o=0,l=n[t].ram_limit;if(void 0===l)return"";j.state.consume[a]&&(o=Math.round(100*j.state.consume[a].ram)/100);var i=o>80?"red":o>50?"orange":"green";return o>=l&&(i="red"),r.a.createElement("div",{className:"progress",style:{position:"relative",overflow:"unset",marginTop:5}},r.a.createElement("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(o,"%"),lineHeight:"unset",background:i}}," ","".concat(o,"%")),r.a.createElement("div",{style:{position:"absolute",width:"".concat(l,"%"),top:0,bottom:0,left:0,borderRight:"solid thin red"}},r.a.createElement("div",{style:{position:"absolute",right:-10,top:-10,color:"red",fontSize:8}},"".concat(l,"%"))))})),E)),C(S,"cpu_limit",(C(f={},COL_NAME,"CPU Limit"),C(f,COL_SORT,!0),C(f,COL_DECORATOR_IN,(function(e,t,n){var a=n[t][USER_POD],o=0,l=n[t].cpu_limit;if(void 0===l)return"";j.state.consume[a]&&(o=Math.round(100*j.state.consume[a].cpu)/100);var i=o>80?"red":o>50?"orange":"green";return o>=l&&(i="red"),r.a.createElement("div",{className:"progress",style:{position:"relative",overflow:"unset",marginTop:5}},r.a.createElement("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(o,"%"),lineHeight:"unset",background:i}}," ","".concat(o,"%")),r.a.createElement("div",{style:{position:"absolute",width:"".concat(l,"%"),top:0,bottom:0,left:0,borderRight:"solid thin red"}},r.a.createElement("div",{style:{position:"absolute",right:-10,top:-10,color:"red",fontSize:8}},"".concat(l,"%"))))})),f)),C(S,"hdd_limit",(C(m={},COL_NAME,"Hard disk Limit"),C(m,COL_SORT,!0),C(m,COL_DECORATOR_IN,(function(e,t,n){var a=n[t][USER_POD],o=n[t].hdd_limit;if(void 0===o)return"";var l=Math.round(10*o/1e3)/10,i=0;j.state.consume[a]&&(i=j.state.consume[a].hdd);var s=Math.round(1e3*Number(i)/Number(o))/10;return r.a.createElement("div",{className:"box_flex"},r.a.createElement("div",{className:"box_line",style:{width:50,fontSize:12},title:"".concat(l,"GB")},r.a.createElement("b",null,l,"G")," "),r.a.createElement("div",{className:"progress",style:{margin:0,flexGrow:1,height:"unset"}},r.a.createElement("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(s,"%"),lineHeight:"unset",background:s>80?"red":s>50?"orange":"green"}}," ","".concat(s,"%"))))})),m)),C(S,USER_MAX_NODE,(C(_={},COL_NAME,lang(USER_MAX_NODE)),C(_,COL_SORT,!0),C(_,COL_STYLE,{textAlign:"center"}),_)),C(S,USER_MAX_NODELAB,(C(h={},COL_NAME,lang(USER_MAX_NODELAB)),C(h,COL_SORT,!0),C(h,COL_STYLE,{textAlign:"center"}),h)),C(S,USER_NOTE,(C(b={},COL_NAME,lang(USER_NOTE)),C(b,COL_SORT,!1),C(b,COL_DECORATOR_IN,(function(e){return HtmlDecode(e)})),b)),S),j.users_struct[STRUCT_FILTERS]=(C(N={},USER_EMAIL,(C(O={},FILTER_NAME,lang(USER_EMAIL)),C(O,FILTER_TYPE,"text"),O)),C(N,USER_ROLE,(C(g={},FILTER_NAME,lang(USER_ROLE)),C(g,FILTER_TYPE,"select"),g)),C(N,USER_STATUS,(C(T={},FILTER_NAME,lang(USER_STATUS)),C(T,FILTER_TYPE,"select"),T)),C(N,USER_NOTE,(C(y={},FILTER_NAME,lang(USER_NOTE)),C(y,FILTER_TYPE,"text"),y)),N),j.users_struct[STRUCT_EDIT]=(C(x={},USER_ROLE,(C(R={},EDIT_NAME,lang(USER_ROLE)),C(R,EDIT_TYPE,"select"),R)),C(x,USER_STATUS,(C(I={},EDIT_NAME,lang(USER_STATUS)),C(I,EDIT_TYPE,"select"),C(I,EDIT_DEFAULT,"1"),C(I,EDIT_NOTE,"Does not apply to Admin"),I)),C(x,USER_ACTIVE_TIME,(C(v={},EDIT_NAME,lang(USER_ACTIVE_TIME)),C(v,EDIT_TYPE,"date"),C(v,EDIT_FORMAT,"llll"),C(v,EDIT_NOTE,"Does not apply to Admin"),v)),C(x,USER_EXPIRED_TIME,(C(A={},EDIT_NAME,lang(USER_EXPIRED_TIME)),C(A,EDIT_TYPE,"date"),C(A,EDIT_FORMAT,"llll"),C(A,EDIT_NOTE,"Does not apply to Admin"),A)),C(x,USER_WORKSPACE,(C(U={},EDIT_NAME,lang(USER_WORKSPACE)),C(U,EDIT_TYPE,"text"),C(U,EDIT_NOTE,"Does not apply to Admin"),U)),C(x,USER_MAX_NODE,(C(D={},EDIT_NAME,lang(USER_MAX_NODE)),C(D,EDIT_TYPE,"number"),C(D,EDIT_NOTE,"Does not apply to Admin"),D)),C(x,USER_MAX_NODELAB,(C(w={},EDIT_NAME,lang(USER_MAX_NODELAB)),C(w,EDIT_TYPE,"number"),C(w,EDIT_NOTE,"Does not apply to Admin"),w)),C(x,USER_NOTE,(C(M={},EDIT_NAME,lang(USER_NOTE)),C(M,EDIT_TYPE,"textarea"),M)),x),j.users_struct[STRUCT_ROWS]=C({},ROW_FUNCS,(function(e){return[r.a.createElement("div",{key:"1",className:"button",onClick:function(){j.editUserModal.modal(),j.editUserModal.setData(e)}},r.a.createElement("i",{className:"fa fa-edit"}))]})),j.users_struct[STRUCT_TABLE]=(C(F={},DATA_TABLE_ID,USERS_TABLE),C(F,DATA_FILTERS,{}),C(F,DATA_HIDDEN_COL,{}),C(F,DATA_PERMIT_COL,j.permissionUsers()),C(F,DATA_SORT,C({},USER_ONLINE_TIME,"desc")),C(F,DATA_KEY,["table_key"]),C(F,FLAG_FILTER_CHANGE,!0),C(F,FLAG_MULTI_SORT,!1),C(F,FLAG_RESIZABLE,!0),C(F,FLAG_SELECT_ROWS,!0),C(F,FLAG_SETTING_ROWS,!0),C(F,FLAG_EXPAND_ROWS,!1),C(F,FLAG_HEAD_ROW,!0),C(F,LINK_FILTER,"/store/public/admin/users/filter"),C(F,LINK_EDIT,"/store/public/admin/users/edit"),C(F,LINK_ADD,"/store/public/admin/users/add"),C(F,LINK_DELETE,"/store/public/admin/users/drop"),C(F,LINK_UPLOAD,"/store/public/admin/users/uploader"),C(F,LINK_MAPPING,"/store/public/admin/users/mapping"),C(F,LINK_READ,"/store/public/admin/users/read"),F),j.state={change:!1,maximum:"",UUID:"",consume:{}},j.checkEdit=j.checkEdit.bind(k(j)),j}var n,a,b;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,e),n=t,(a=[{key:"permissionUsers",value:function(){return Object.assign.apply(Object,D(Object.keys(this.users_struct[STRUCT_COLUMNS]).map((function(e,t){return C({},e,"Read")}))).concat(D(Object.keys(this.users_struct[STRUCT_EDIT]).map((function(e,t){return C({},e,"Write")}))),[C({},USER_OFFLINE,"Read")]))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"box_padding",style:{position:"relative"}},r.a.createElement(m.a,{ref:function(t){return e.table=t},table:this.users_struct,autoload:!0,successAdd:function(t){return e.setState({change:!0})},successEdit:function(t){return e.setState({change:!0})},successDel:function(t){return e.setState({change:!0})}},r.a.createElement("div",{className:"box_flex"},r.a.createElement(o.a,null),r.a.createElement("div",{style:{margin:"auto 0px auto auto"}},r.a.createElement("a",{target:"_blank",href:"".concat(App.server.common.APP_CENTER,"/auth/multi_access/view")},r.a.createElement("div",null,"Maximum Accounts: ",r.a.createElement("b",null,this.state.maximum))),r.a.createElement("div",null,"Box's ID: ",r.a.createElement("b",null,this.state.UUID)),r.a.createElement("br",null))),r.a.createElement(s.a,{left:r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,null)," ",r.a.createElement("div",{style:{display:"block"},className:"button btn btn-xs btn-danger",onClick:function(){e.apply()}},lang("Apply"))),right:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table_function"},r.a.createElement("div",{className:"button box_flex",title:"Add Row",onClick:function(){return e.addUserModal.modal()}},r.a.createElement("i",{className:"fa fa-plus-square"})," ",lang("Add"))),r.a.createElement(f.a,null),r.a.createElement(u.a,null),r.a.createElement(p.a,null),r.a.createElement(d.a,null),r.a.createElement(E.a,null))}),r.a.createElement(l.a,{className:"table table-bordered table-resizable"}),r.a.createElement(i.a,null),r.a.createElement(_.a,{ref:function(t){return e.addUserModal=t}}),r.a.createElement(A,{ref:function(t){return e.editUserModal=t}})),r.a.createElement(h.a,{when:this.state.change,message:function(e){return"You still not Apply your change. It will be lost. Do you want to continue?"}}))}},{key:"checkEdit",value:function(){if(this.state.change)return window.event.returnValue="If you leave before saving, your changes will be lost.","If you leave before saving, your changes will be lost."}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("beforeunload",this.checkEdit),this.getLimit(),this.getConsume(),this.nodeTableInteval=setInterval((function(){e.getConsume().then((function(e){}))}),15e3),this.loadOriginInteval=setInterval((function(){e.state.change||e.table.loadOrigin([],!1)}),6e4)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.checkEdit),this.nodeTableInteval&&clearInterval(this.nodeTableInteval),this.loadOriginInteval&&clearInterval(this.loadOriginInteval)}},{key:"apply",value:function(){var e=this;return App.loading(!0,"Loading..."),axios.request({url:"/store/public/admin/users/apply",method:"post",data:{data:this.table.getOrigin()}}).then((function(t){App.loading(!1),(t=t.data).result?e.setState({change:!1}):error_handle(t),e.table.loadOrigin(),e.setState({change:!1})})).catch((function(t){return console.log(t),App.loading(!1),error_handle(t),e.table.loadOrigin(),!1}))}},{key:"getLimit",value:function(){var e=this;return axios.request({url:"/store/public/admin/users/getLimit",method:"post"}).then((function(t){App.loading(!1),(t=t.data).result?e.setState({maximum:t.data.limit,UUID:t.data.UUID}):error_handle(t)})).catch((function(e){console.log(e),App.loading(!1),error_handle(e)}))}},{key:"getConsume",value:function(){var e=this;return axios.request({url:"/store/public/admin/node_sessions/getConsume",method:"post"}).then((function(t){if(App.loading(!1),(t=t.data).result){var n=t.data,a={};for(var r in n){var o=n[r];a[o[NODE_SESSION_POD]]||(a[o[NODE_SESSION_POD]]={ram:0,cpu:0,hdd:0}),a[o[NODE_SESSION_POD]].ram+=Number(o[NODE_SESSION_RAM]),a[o[NODE_SESSION_POD]].cpu+=Number(o[NODE_SESSION_CPU]),a[o[NODE_SESSION_POD]].hdd+=Number(o[NODE_SESSION_HDD]),e.setState({consume:a})}}else error_handle(t)})).catch((function(e){console.log(e),App.loading(!1),error_handle(e)}))}}])&&w(n.prototype,a),b&&w(n,b),t}(a.Component);t.default=x},729:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(13);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===l(Symbol.iterator)?function(e){return l(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":l(e)})(e)}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=c(this,u(t).call(this,e))).state={files:[],folders:[],folder:n.props.folder,workspace:"",editing:"",editing_value:""},n.parent=n.props.parent,n}var n,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(a=[{key:"setFolder",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&""!=e||(e=this.props.folder),this.setState({folder:e,editing:"",workspace:""},(function(){n&&t.loadFolder()}))}},{key:"setWorkSpace",value:function(e){var t=this;e||(e=""),this.setState({workspace:e,editing:""},(function(){t.loadFolder()}))}},{key:"getWorkSpace",value:function(){return this.state.workspace}},{key:"render",value:function(){var e=this,t=get(this.props.except,[]),n=this.state.workspace.split("/"),a=[];return n.map((function(e){""!=e&&a.push(e)})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("ol",{className:"breadcrumb",style:{margin:0,padding:"5px",position:"relative"}},r.a.createElement("li",{className:"breadcrumb-item button",onClick:function(){e.setWorkSpace("")}},r.a.createElement("i",{className:"fa fa-folder",style:{color:"#dfba49"}})," ",this.state.folder.replace(/.*\//,"")),a.map((function(t,n){var o="/"+a.slice(0,n+1).join("/");return r.a.createElement("li",{key:n,className:"breadcrumb-item button",onClick:function(){e.setWorkSpace(o)}},r.a.createElement("i",{className:"fa fa-folder",style:{color:"#dfba49"}})," ",t)})),r.a.createElement("div",{style:{position:"absolute",right:5,top:0,bottom:0,background:"inherit"},className:"box_flex"},r.a.createElement("i",{title:"Add New Folder",className:"fa fa-plus-circle button",onClick:function(){e.addNewFolder()}})))),r.a.createElement("div",{style:{paddingLeft:10,overflow:"auto",height:this.props.height?this.state.height:200}},this.state.folders.map((function(n,a){var o=n.split("/").pop();return r.a.createElement("div",{className:"folder_item",key:a,style:{display:t.includes(o)?"none":"block",position:"relative"}},r.a.createElement("i",{className:"fa fa-folder",style:{color:"#dfba49"}})," ",e.state.editing==o?r.a.createElement("input",{ref:function(t){return e.editingInput=t},type:"text",onBlur:function(){e.editFolder()},value:e.state.editing_value,onChange:function(t){e.setState({editing_value:t.target.value})}}):r.a.createElement("span",{className:"button",onClick:function(){e.setWorkSpace(e.state.workspace+"/"+o)}},o),r.a.createElement("div",{style:{position:"absolute",right:5,top:0,bottom:0,background:"inherit"},className:"box_flex folder_buttons"},r.a.createElement("i",{style:{padding:5},title:"Edit Folder",className:"fa fa-edit button",onClick:function(t){t.stopPropagation(),e.setState({editing:o,editing_value:o})}}),r.a.createElement("i",{style:{padding:5},title:"Delete Folder",className:"fa fa-close button",onClick:function(t){t.stopPropagation(),e.deleteFolder(o)}})))})),this.state.files.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("i",{className:"fa fa-file-text-o",style:{color:"gray"}})," ",e.split("/").pop())}))),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(o.a,{ref:function(t){return e.load=t},style:{position:"absolute"}}))),r.a.createElement("style",null,"\n                    .folder_item .folder_buttons{\n                        display: none;\n                    }\n                    .folder_item:hover .folder_buttons{\n                        display: flex;\n                    }\n\n                "))}},{key:"componentDidMount",value:function(){this.setWorkSpace("")}},{key:"loadFolder",value:function(){var e=this;if(this.props.link)return this.load.loading(!0),axios.request({url:this.props.link,method:"post",data:{folder:this.state.folder+this.state.workspace}}).then((function(t){t=t.data,e.load.loading(!1),t.result&&e.setState({folders:t.data.folders,files:t.data.files},(function(){e.editingInput&&e.editingInput.focus()}))})).catch((function(t){e.load.loading(!1),error_handle(t)}))}},{key:"addNewFolder",value:function(){for(var e=this,t="New Folder",n=1;void 0!==this.state.folders.find((function(e){return e.split("/").pop()==t}));)t="New Folder "+n,n++;var a=this.state.folder+this.state.workspace;return a=a.replace("/opt/unetlab/labs",""),App.loading(!0),axios.request({url:"/api/folders/add",method:"post",data:{path:a,name:t}}).then((function(n){n=n.data,App.loading(!1),"success"==n.status?(e.setState({editing:t,editing_value:t}),e.loadFolder()):error_handle(n)})).catch((function(e){App.loading(!1),error_handle(e)}))}},{key:"editFolder",value:function(){var e=this;if(this.state.editing!=this.state.editing_value){var t=this.state.folder+this.state.workspace+"/"+this.state.editing,n=this.state.folder+this.state.workspace+"/"+this.state.editing_value;return t=t.replace("/opt/unetlab/labs",""),n=n.replace("/opt/unetlab/labs",""),App.loading(!0),axios.request({url:"/api/folders/edit",method:"post",data:{path:t,new_path:n}}).then((function(t){t=t.data,App.loading(!1),"success"==t.status?e.setState({editing:"",editing_value:""},(function(){e.loadFolder()})):error_handle(t)})).catch((function(e){App.loading(!1),error_handle(e)}))}this.setState({editing:"",editing_value:""})}},{key:"deleteFolder",value:function(e){var t=this,n=this.state.folder+this.state.workspace+"/"+e;n=n.replace("/opt/unetlab/labs",""),makeQuestion("Do you want to Delete this Folder?","Yes","Cancel").then((function(e){if(e)return App.loading(!0),axios.request({url:"/api/folders/delete",method:"post",data:{path:n}}).then((function(e){e=e.data,App.loading(!1),"success"==e.status?t.setState({editing:"",editing_value:""},(function(){t.loadFolder()})):error_handle(e)})).catch((function(e){App.loading(!1),error_handle(e)}))}))}}])&&s(n.prototype,a),l&&s(n,l),t}(a.Component);t.a=d},742:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(5),l=n.n(o),i=n(85),s=n.n(i);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){return c(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.enable=function(e){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(e)},t.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},t.prototype.componentWillMount=function(){s()(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},t.prototype.componentWillReceiveProps=function(e){e.when?this.props.when&&this.props.message===e.message||this.enable(e.message):this.disable()},t.prototype.componentWillUnmount=function(){this.disable()},t.prototype.render=function(){return null},t}(r.a.Component);p.propTypes={when:l.a.bool,message:l.a.oneOfType([l.a.func,l.a.string]).isRequired},p.defaultProps={when:!0},p.contextTypes={router:l.a.shape({history:l.a.shape({block:l.a.func.isRequired}).isRequired}).isRequired};var d=p;t.a=d}}]);