(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{208:function(e,t,n){var a=n(219);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(19)(a,r);a.locals&&(e.exports=a.locals)},219:function(e,t,n){(t=e.exports=n(18)(!1)).push([e.i,".input_item {\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 10px;\n  grid-template-columns: 1fr 1fr;\n  align-items: center;\n}\n\n.input_item {\n  padding: 5px;\n  width: 100%;\n}\n\n.input_item:hover .input_item_text {\n  font-weight: bold;\n}\n\n.input_item_input {\n  padding: 5px;\n  border-radius: 4px;\n  border: solid thin #0d274d;\n  width: 100%;\n}",""]),t.locals={font_family:'"Helvetica Neue", Helvetica, Arial, sans-serif',font_size:"12px",font_color:"#333",primary_color:"#0d274d",dark_color:"#0d274d",light_color:"#0d274d",menu_top:"60px",menu_left:"0px"}},596:function(e,t,n){"use strict";var a=n(0),r=n.n(a);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){return(l="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function u(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(e){var n;return i(this,t),(n=u(this,p(t).call(this,e))).state={files:[],folders:[],folder:n.props.folder,isset:!1,loading:!1,expand:!1},n.parent=n.props.parent,n}return d(t,e),c(t,[{key:"render",value:function(){var e=this,n=get(this.props.except,[]),a=this.props.folder.split("/").pop(),o=get(this.props.selected,[]);return r.a.createElement("div",{style:{display:n.includes(a)?"none":"block"}},r.a.createElement("div",{onClick:function(){e.onClickHandle()},className:"box_flex folder ".concat(o.includes(this.props.folder)?"selected":""),style:{width:"100%",cursor:"pointer"}},r.a.createElement("i",{className:"fa fa-folder",style:{color:"#FFC107"}})," ",this.props.folder.split("/").pop()," ",o.includes(this.props.folder)?r.a.createElement("i",{className:"fa fa-check-circle",style:{color:"#00d100"}}):"",this.state.loading?r.a.createElement("i",{style:{margin:"auto 5px auto auto"},className:"fa fa-circle-o-notch fa-spin"}):""),r.a.createElement("div",{style:{paddingLeft:10,display:this.state.expand?"block":"none"}},this.state.files.map((function(t,n){return r.a.createElement(E,{key:n,parent:e,file:t,selected:o})})),this.state.folders.map((function(a,l){return r.a.createElement(t,{except:n,key:l,link:e.props.link,parent:e,folder:a,selected:o})}))))}},{key:"componentDidMount",value:function(){this.props.expand&&this.loadFolder()}},{key:"onClickHandle",value:function(){this.state.isset?this.setState({expand:!this.state.expand}):this.loadFolder(),this.onSelectFolder(this.props.folder)}},{key:"onSelectFolder",value:function(e){if(this.props.onSelectFolder)this.props.onSelectFolder(e);else{if(!this.props.parent)return;if(!this.props.parent.onSelectFolder)return;this.props.parent.onSelectFolder(e)}}},{key:"onSelect",value:function(e){if(this.props.onSelect)this.props.onSelect(e);else{if(!this.props.parent)return;if(!this.props.parent.onSelect)return;this.props.parent.onSelect(e)}}},{key:"loadFolder",value:function(){var e=this;if(this.props.link)return this.setState({loading:!0}),axios.request({url:this.props.link,method:"post",data:{folder:this.props.folder}}).then((function(t){(t=t.data).result?e.setState({loading:!1,expand:!0,isset:!0,folders:t.data.folders,files:t.data.files}):e.setState({loading:!1,expand:!0})})).catch((function(e){this.setState({loading:!1}),error_handle(e)}))}}]),t}(a.Component);t.a=m;var E=function(e){function t(e){var n;return i(this,t),(n=u(this,p(t).call(this,e))).state={file:n.props.file},n.parent=n.props.parent,n}return d(t,e),c(t,[{key:"render",value:function(){var e=this,t=get(this.props.selected,[]);return r.a.createElement("div",{onClick:function(){e.onClickHandle()},className:"box_flex file ".concat(t.includes(this.props.file)?"selected":""),style:{width:"100%",cursor:"pointer"}},r.a.createElement("i",{className:"fa fa-file-text-o",style:{color:"gray"}})," ",this.props.file.split("/").pop()," ",t.includes(this.props.file)?r.a.createElement("i",{className:"fa fa-check-circle",style:{color:"#00d100"}}):"")}},{key:"onClickHandle",value:function(){this.props.parent&&this.props.parent.onSelect&&this.props.parent.onSelect(this.props.file)}}]),t}(a.Component)},599:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(21);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===l(Symbol.iterator)?function(e){return l(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":l(e)})(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(e,n){var a,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(a=!(o=p(t).call(this,e,n))||"object"!==i(o)&&"function"!=typeof o?d(r):o).table=a.context,a.table.children.FuncEditRows=d(a),a.id=a.table[STRUCT_TABLE][DATA_TABLE_ID]+Math.floor(1e4*Math.random()),a.props.upload?a.upload=a.props.upload:a.upload=a.table.upload,a}var n,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(a=[{key:"initial",value:function(){for(var e in this.struct={},this.permitCol=this.table[STRUCT_TABLE][DATA_PERMIT_COL],this.permitCol)this.table[STRUCT_EDIT][e]&&(this.struct[e]=this.table[STRUCT_EDIT][e],"Read"==this.permitCol[e]?this.struct[e][EDIT_WRITABLE]=!1:this.struct[e][EDIT_WRITABLE]=!0)}},{key:"onClickHandle",value:function(){var e=this;this.upload(this.form).then((function(t){if(t){var n=e.form.getValue();e.table[STRUCT_TABLE][DATA_EDITOR]&&(n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{},e.table[STRUCT_TABLE][DATA_EDITOR])),e.editRow(n)}}))}},{key:"editRow",value:function(e){var t,n=this,a=this.table[STRUCT_TABLE][DATA_SELECT_ROWS];if(0!=count(a)){var r=(c(t={},DATA_KEY,a),c(t,DATA_EDITOR,e),t);this.table.editRow(r).then((function(e){e.result?($("#edit_row_modal"+n.id).modal("hide"),n.table[STRUCT_TABLE][DATA_SELECT_ROWS]={},n.table.filter()):error_handle(e)}))}else Swal("Error","Please select at lest 1 row")}},{key:"reload",value:function(){this.forceUpdate()}},{key:"render",value:function(){var e=this;this.initial();var t=get(this.props.text,"Edit");return r.a.createElement("div",{className:"table_function"},r.a.createElement("div",{className:"button",title:"Edit Multi rows",onClick:function(){$("#edit_row_modal"+e.id).modal(),e.form.setState({select:{}})},style:{display:"flex"}},r.a.createElement("i",{className:"fa fa-edit"})," ",t),r.a.createElement("div",{className:"modal fade",id:"edit_row_modal"+this.id,onClick:function(){addClass($("body")[0],"modal-open")}},r.a.createElement("div",{className:"modal-dialog modal-lg modal-dialog-centered"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h4",{className:"modal-title"},"Add Row"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},"×")),r.a.createElement("div",{className:"modal-body"},r.a.createElement(o.a,{ref:function(t){return e.form=t},struct:this.struct,select:!0})),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){e.onClickHandle()}},"Save"),r.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal"},"Close"))))))}}])&&u(n.prototype,a),l&&u(n,l),t}(a.Component);m.contextType=TableContext,t.a=m},627:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(521),l=n(522),i=n(95),s=n(91),c=n(92),u=(n(209),n(597),n(523)),p=n(598),d=n(524),f=n(93),m=n(94),E=n(599),_=(n(596),n(6)),b=(n(208),n(729));function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e){return(h="function"==typeof Symbol&&"symbol"===y(Symbol.iterator)?function(e){return y(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":y(e)})(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(e,n){var a,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(a=!(o=g(t).call(this,e,n))||"object"!==h(o)&&"function"!=typeof o?N(r):o).id=makeId(),a.table=a.context,a.table.children.FuncAddOffUser=N(a),a.state={role:""},a}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,e),n=t,(a=[{key:"modal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"show";"hide"==e?$("#file_mng_modal"+this.id).modal("hide"):$("#file_mng_modal"+this.id).modal()}},{key:"render",value:function(){var e,t,n,a,o,l,i,s,c,u=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal fade",id:"file_mng_modal"+this.id},r.a.createElement("div",{className:"modal-dialog modal-lg modal-dialog-centered"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("strong",null,lang("Add User")),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},"×")),r.a.createElement("div",{className:"modal-body",style:{textAlign:"initial"}},r.a.createElement("div",{style:{padding:7}},r.a.createElement("div",null,r.a.createElement("div",{style:{margin:"10px 0px"},title:lang("Username")},r.a.createElement(_.a,{className:"input_item_input",ref:function(e){return u.usernameInput=e},placeholder:lang("Username"),struct:(e={},S(e,INPUT_TYPE,"text"),S(e,INPUT_NULL,!1),e)})),r.a.createElement("div",{style:{margin:"10px 0px"},title:lang("Password")},r.a.createElement(_.a,{className:"input_item_input",ref:function(e){return u.passwordInput=e},placeholder:lang("Password"),struct:(t={},S(t,INPUT_TYPE,"password"),S(t,INPUT_NULL,!1),t)})),r.a.createElement("div",{style:{margin:"10px 0px"},title:lang("Role")},r.a.createElement(_.a,{className:"input_item_input",ref:function(e){return u.roleInput=e},placeholder:lang("Role"),struct:(n={},S(n,INPUT_TYPE,"select"),S(n,INPUT_NULL,!1),S(n,INPUT_OPTION,get(this.table[STRUCT_EDIT][USER_ROLE][EDIT_OPTION],[])),S(n,INPUT_ONCHANGE,(function(e,t){u.setState({role:t.getValue()},(function(){return u.getRole()}))})),n)})),0==this.state.role?"":r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{margin:"10px 0px"},title:lang("Status")},r.a.createElement(_.a,{className:"input_item_input",ref:function(e){return u.statusInput=e},placeholder:lang("Status"),struct:(a={},S(a,INPUT_TYPE,"select"),S(a,INPUT_NULL,!0),S(a,INPUT_OPTION,get(this.table[STRUCT_EDIT][USER_STATUS][EDIT_OPTION],[])),S(a,INPUT_DEFAULT,"1"),a)})),r.a.createElement("div",{style:{margin:"10px 0px"},title:lang("Active Time")},r.a.createElement(_.a,{className:"input_item_input",ref:function(e){return u.activeInput=e},placeholder:lang("Active Time"),struct:(o={},S(o,INPUT_TYPE,"date"),S(o,INPUT_NULL,!0),S(o,INPUT_FORMAT,"llll"),o)})),r.a.createElement("div",{style:{margin:"10px 0px"},title:lang("Expired Time")},r.a.createElement(_.a,{className:"input_item_input",ref:function(e){return u.expiredInput=e},placeholder:lang("Expired Time"),struct:(l={},S(l,INPUT_TYPE,"date"),S(l,INPUT_NULL,!0),S(l,INPUT_FORMAT,"llll"),l)})),r.a.createElement("div",null,r.a.createElement("strong",null,lang("Workspace")),r.a.createElement("p",null,lang("workspace_des")),r.a.createElement(b.a,{ref:function(e){return u.workspaceInput=e},except:["Your labs from PNETLab Store"],link:"/store/public/admin/default/folder",folder:"/opt/unetlab/labs"})),r.a.createElement("div",{style:{margin:"10px 0px"},title:lang(USER_MAX_NODE)},r.a.createElement(_.a,{min:0,className:"input_item_input",ref:function(e){return u.maxNodeInput=e},placeholder:lang(USER_MAX_NODE),struct:(i={},S(i,INPUT_TYPE,"number"),S(i,INPUT_NULL,!0),i)})),r.a.createElement("div",{style:{margin:"10px 0px"},title:lang(USER_MAX_NODELAB)},r.a.createElement(_.a,{min:0,className:"input_item_input",ref:function(e){return u.maxNodeLabInput=e},placeholder:lang(USER_MAX_NODELAB),struct:(s={},S(s,INPUT_TYPE,"number"),S(s,INPUT_NULL,!0),s)}))),r.a.createElement("div",{style:{margin:"10px 0px"},title:"Note"},r.a.createElement(_.a,{className:"input_item_input",ref:function(e){return u.noteInput=e},placeholder:lang("Note"),struct:(c={},S(c,INPUT_TYPE,"textarea"),S(c,INPUT_NULL,!0),c)}))))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){u.addUsers()}},lang("Add")),r.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal"},lang("Cancel")))))))}},{key:"getRole",value:function(){var e=this;return App.loading(!0),axios.request({url:"/store/public/admin/user_roles/read",method:"post",data:{data:[S({},USER_ROLE_ID,this.state.role)]}}).then((function(t){if(t=t.data,App.loading(!1),t.result){if(isset(t.data[0])){var n=t.data[0],a=get(n[USER_ROLE_WORKSPACE],"");e.workspaceInput.setFolder("/opt/unetlab/labs"+a)}}else error_handle(t)})).catch((function(e){App.loading(!1),error_handle(e)}))}},{key:"addUsers",value:function(){var e,t=this,n=this.noteInput.getValue(),a=this.roleInput.getValue();if(null!==a){var r=this.usernameInput.getValue();if(null!==r){var o=this.passwordInput.getValue();if(null!==o){var l="1";this.statusInput&&(l=this.statusInput.getValue());var i="";this.activeInput&&(i=this.activeInput.getValue());var s="";this.expiredInput&&(s=this.expiredInput.getValue());var c="";this.workspaceInput&&(c=this.workspaceInput.getWorkSpace());var u="";this.maxNodeInput&&(u=this.maxNodeInput.getValue());var p="";this.maxNodeLabInput&&(p=this.maxNodeLabInput.getValue()),this.table.addRow([(e={},S(e,USER_USERNAME,r),S(e,USER_PASSWORD,o),S(e,USER_ROLE,a),S(e,USER_STATUS,l),S(e,USER_ACTIVE_TIME,i),S(e,USER_EXPIRED_TIME,s),S(e,USER_WORKSPACE,c),S(e,USER_NOTE,n),S(e,USER_MAX_NODE,u),S(e,USER_MAX_NODELAB,p),e)]).then((function(e){e.result?(t.modal("hide"),t.table.filter()):error_handle(e)}))}}}}}])&&T(n.prototype,a),o&&T(n,o),t}(a.Component);v.contextType=TableContext;var I=v;function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e){return(U="function"==typeof Symbol&&"symbol"===R(Symbol.iterator)?function(e){return R(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":R(e)})(e)}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function P(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=P(this,D(t).call(this,e))).id=makeId(),n.state={keys:[],error:""},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,e),n=t,(a=[{key:"modal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"show";"hide"==e?$("#modal"+this.id).modal("hide"):($("#modal"+this.id).modal(),this.loadKeys())}},{key:"render",value:function(){var e,t=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal fade",id:"modal"+this.id},r.a.createElement("div",{className:"modal-dialog modal-lg modal-dialog-centered"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},"×")),r.a.createElement("div",{className:"modal-body",style:{textAlign:"initial"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-10"},r.a.createElement(_.a,{placeholder:"Key License",className:"input_item_input",ref:function(e){return t.keyInput=e},struct:(e={},A(e,INPUT_TYPE,"text"),A(e,INPUT_NULL,!1),e)})),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("div",{style:{padding:5,width:"100%"},className:"button btn btn-info",onClick:function(){return t.activeKey()}},"Active"))),r.a.createElement("div",{className:"box_padding"},0==this.state.keys.length?r.a.createElement("div",{className:"alert alert-warning"},"No license. You need to keep your PNETLab alive to use the extended license"):r.a.createElement(r.a.Fragment,null,this.state.keys.map((function(e,n){var a=Number(moment().format("X")),o=Number(e[OFF_MA_LIC_EXP])<a;return console.log(o),r.a.createElement("div",{key:n,className:"box_padding box_shadow",style:{position:"relative",margin:"5px 0px"}},r.a.createElement("div",{className:"close",onClick:function(){return t.deleteKey(e[OFF_MA_LIC_KEY])}},"×"),r.a.createElement("div",{className:"box_flex"},r.a.createElement("div",null,"Exp: ",r.a.createElement("b",null,moment(e[OFF_MA_LIC_EXP],"X").format("llll"))," ",o?r.a.createElement("b",{style:{color:"red"}},"(Expired)"):""),r.a.createElement("div",{style:{width:15}}),r.a.createElement("div",null,"Quantity: ",r.a.createElement("b",null,e[OFF_MA_LIC_QTY]))),r.a.createElement("div",{style:{wordBreak:"break-all"}},e[OFF_MA_LIC_KEY]))})))))))))}},{key:"loadKeys",value:function(){var e=this;return axios.request({url:"/store/public/admin/users/getKeys",method:"post"}).then((function(t){(t=t.data).result&&e.setState({keys:t.data})})).catch((function(e){console.log(e)}))}},{key:"deleteKey",value:function(e){var t=this;return App.loading(!0),axios.request({url:"/store/public/admin/users/deleteKey",method:"post",data:A({},OFF_MA_LIC_KEY,e)}).then((function(e){App.loading(!1),(e=e.data).result?t.loadKeys():error_handle(e)})).catch((function(e){App.loading(!1),console.log(e),error_handle(response)}))}},{key:"activeKey",value:function(){var e=this,t=this.keyInput.getValue();if(null!=t)return App.loading(!0),axios.request({url:"/store/public/admin/users/activeKey",method:"post",data:A({},OFF_MA_LIC_KEY,t)}).then((function(t){App.loading(!1),(t=t.data).result?(e.loadKeys(),e.keyInput.setValue("")):error_handle(t)})).catch((function(e){App.loading(!1),console.log(e),error_handle(response)}))}}])&&L(n.prototype,a),o&&L(n,o),t}(a.Component);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e){return(k="function"==typeof Symbol&&"symbol"===x(Symbol.iterator)?function(e){return x(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":x(e)})(e)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var X=function(e){function t(e,n){var a,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(a=!(o=j(t).call(this,e,n))||"object"!==k(o)&&"function"!=typeof o?Y(r):o).id=makeId(),a.table=a.context,a.table.children.FuncEditOffUser=Y(a),a.state={role:""},a.rowData={},a}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,e),n=t,(a=[{key:"modal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"show";"hide"==e?$("#file_mng_modal"+this.id).modal("hide"):$("#file_mng_modal"+this.id).modal()}},{key:"setData",value:function(e){var t=this;this.setState({role:get(e[USER_ROLE],"")},(function(){t.getRole().then((function(){t.rowData=e,t.usernameInput.setValue(e[USER_USERNAME]),t.passwordInput.setValue(""),t.roleInput.setValue(e[USER_ROLE]),t.noteInput.setValue(e[USER_NOTE]),t.statusInput&&t.statusInput.setValue(e[USER_STATUS]),t.activeInput&&t.activeInput.setValue(e[USER_ACTIVE_TIME]),t.expiredInput&&t.expiredInput.setValue(e[USER_EXPIRED_TIME]),t.maxNodeInput&&t.maxNodeInput.setValue(e[USER_MAX_NODE]),t.maxNodeLabInput&&t.maxNodeLabInput.setValue(e[USER_MAX_NODELAB]),t.workspaceInput&&t.workspaceInput.setWorkSpace(e[USER_WORKSPACE])}))}))}},{key:"render",value:function(){var e,t,n,a,o,l,i,s,c,u=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal fade",id:"file_mng_modal"+this.id},r.a.createElement("div",{className:"modal-dialog modal-lg modal-dialog-centered"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("strong",null,lang("Add User")),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},"×")),r.a.createElement("div",{className:"modal-body",style:{textAlign:"initial"}},r.a.createElement("div",{style:{padding:7}},r.a.createElement("div",null,r.a.createElement("div",{style:{margin:"10px 0px"},title:lang("Username")},r.a.createElement(_.a,{className:"input_item_input",ref:function(e){return u.usernameInput=e},placeholder:lang("Username"),struct:(e={},M(e,INPUT_TYPE,"text"),M(e,INPUT_NULL,!1),e)})),r.a.createElement("div",{style:{margin:"10px 0px"},title:lang("Password")},r.a.createElement(_.a,{className:"input_item_input",ref:function(e){return u.passwordInput=e},placeholder:lang("Password"),struct:(t={},M(t,INPUT_TYPE,"password"),M(t,INPUT_NULL,!0),t)})),r.a.createElement("div",{style:{margin:"10px 0px"},title:lang("Role")},r.a.createElement(_.a,{className:"input_item_input",ref:function(e){return u.roleInput=e},placeholder:lang("Role"),struct:(n={},M(n,INPUT_TYPE,"select"),M(n,INPUT_NULL,!1),M(n,INPUT_OPTION,get(this.table[STRUCT_EDIT][USER_ROLE][EDIT_OPTION],[])),M(n,INPUT_ONCHANGE,(function(e,t){u.setState({role:t.getValue()},(function(){return u.getRole()}))})),n)})),0==this.state.role?"":r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{margin:"10px 0px"},title:lang("Status")},r.a.createElement(_.a,{className:"input_item_input",ref:function(e){return u.statusInput=e},placeholder:lang("Status"),struct:(a={},M(a,INPUT_TYPE,"select"),M(a,INPUT_NULL,!0),M(a,INPUT_OPTION,get(this.table[STRUCT_EDIT][USER_STATUS][EDIT_OPTION],[])),M(a,INPUT_DEFAULT,"1"),a)})),r.a.createElement("div",{style:{margin:"10px 0px"},title:lang("Active Time")},r.a.createElement(_.a,{className:"input_item_input",ref:function(e){return u.activeInput=e},placeholder:lang("Active Time"),struct:(o={},M(o,INPUT_TYPE,"date"),M(o,INPUT_NULL,!0),M(o,INPUT_FORMAT,"llll"),o)})),r.a.createElement("div",{style:{margin:"10px 0px"},title:lang("Expired Time")},r.a.createElement(_.a,{className:"input_item_input",ref:function(e){return u.expiredInput=e},placeholder:lang("Expired Time"),struct:(l={},M(l,INPUT_TYPE,"date"),M(l,INPUT_NULL,!0),M(l,INPUT_FORMAT,"llll"),l)})),r.a.createElement("div",null,r.a.createElement("strong",null,lang("Workspace")),r.a.createElement("p",null,lang("workspace_des")),r.a.createElement(b.a,{ref:function(e){return u.workspaceInput=e},except:["Your labs from PNETLab Store"],link:"/store/public/admin/default/folder",folder:"/opt/unetlab/labs"})),r.a.createElement("div",{style:{margin:"10px 0px"},title:lang(USER_MAX_NODE)},r.a.createElement(_.a,{min:0,className:"input_item_input",ref:function(e){return u.maxNodeInput=e},placeholder:lang(USER_MAX_NODE),struct:(i={},M(i,INPUT_TYPE,"number"),M(i,INPUT_NULL,!0),i)})),r.a.createElement("div",{style:{margin:"10px 0px"},title:lang(USER_MAX_NODELAB)},r.a.createElement(_.a,{min:0,className:"input_item_input",ref:function(e){return u.maxNodeLabInput=e},placeholder:lang(USER_MAX_NODELAB),struct:(s={},M(s,INPUT_TYPE,"number"),M(s,INPUT_NULL,!0),s)}))),r.a.createElement("div",{style:{margin:"10px 0px"},title:"Note"},r.a.createElement(_.a,{className:"input_item_input",ref:function(e){return u.noteInput=e},placeholder:"Note",struct:(c={},M(c,INPUT_TYPE,"textarea"),M(c,INPUT_NULL,!0),c)}))))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){u.editUser()}},lang("Save")),r.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal"},lang("Cancel")))))))}},{key:"getRole",value:function(){var e=this;return App.loading(!0),axios.request({url:"/store/public/admin/user_roles/read",method:"post",data:{data:[M({},USER_ROLE_ID,this.state.role)]}}).then((function(t){if(t=t.data,App.loading(!1),t.result){if(isset(t.data[0])){var n=t.data[0],a=get(n[USER_ROLE_WORKSPACE],"");e.workspaceInput.setFolder("/opt/unetlab/labs"+a)}}else error_handle(t)})).catch((function(e){App.loading(!1),error_handle(e)}))}},{key:"editUser",value:function(){var e,t,n=this,a=this.noteInput.getValue(),r=this.roleInput.getValue();if(null!==r){var o=this.usernameInput.getValue();if(null!==o){var l=this.passwordInput.getValue();if(null!==l){var i="1";this.statusInput&&(i=this.statusInput.getValue());var s="";this.activeInput&&(s=this.activeInput.getValue());var c="";this.expiredInput&&(c=this.expiredInput.getValue());var u="";this.workspaceInput&&(u=this.workspaceInput.getWorkSpace());var p="";this.maxNodeLabInput&&(p=this.maxNodeLabInput.getValue());var d="";this.maxNodeInput&&(d=this.maxNodeInput.getValue()),this.table.editRow((t={},M(t,DATA_KEY,[M({},USER_POD,this.rowData[USER_POD])]),M(t,DATA_EDITOR,(e={},M(e,USER_USERNAME,o),M(e,USER_PASSWORD,l),M(e,USER_ROLE,r),M(e,USER_STATUS,i),M(e,USER_ACTIVE_TIME,s),M(e,USER_EXPIRED_TIME,c),M(e,USER_WORKSPACE,u),M(e,USER_NOTE,a),M(e,USER_MAX_NODE,d),M(e,USER_MAX_NODELAB,p),e)),t)).then((function(e){e.result?(n.modal("hide"),n.table.filter()):error_handle(e)}))}}}}}])&&F(n.prototype,a),o&&F(n,o),t}(a.Component);X.contextType=TableContext;var W=X;function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e){return(B="function"==typeof Symbol&&"symbol"===K(Symbol.iterator)?function(e){return K(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":K(e)})(e)}function H(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function z(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Z=function(e){function t(e){var n,a,o,l,i,s,c,u,p,d,f,m,E,_,b,y,h,S,T,g,N,O,v,I,R,U,A,L,P,D,C,w,x,k,M,F;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(F=z(this,Q(t).call(this,e))).users_struct={},F.users_struct[STRUCT_FILTERS]={},F.users_struct[STRUCT_COLUMNS]=(G(h={},USER_USERNAME,(G(n={},COL_NAME,lang(USER_USERNAME)),G(n,COL_SORT,!1),G(n,COL_DECORATOR_IN,(function(e,t,n){var a=n[t];return 1==a[USER_OFFLINE]?r.a.createElement("span",{title:"Offline Account"},r.a.createElement("i",{className:"fa fa-map-marker",style:{color:"red",fontSize:16}})," ",formatName(a[USER_USERNAME])):r.a.createElement("span",{title:"Online Account"},r.a.createElement("i",{className:"fa fa-globe",style:{color:"#4caf50"}})," ",formatName(a[USER_USERNAME]))})),G(n,COL_STYLE,{whiteSpace:"nowrap"}),n)),G(h,USER_EMAIL,(G(a={},COL_NAME,lang(USER_EMAIL)),G(a,COL_SORT,!0),a)),G(h,USER_IP,(G(o={},COL_NAME,lang(USER_IP)),G(o,COL_SORT,!1),G(o,COL_DECORATOR_IN,(function(e){return HtmlDecode(e)})),o)),G(h,USER_ROLE,(G(l={},COL_NAME,lang(USER_ROLE)),G(l,COL_SORT,!1),l)),G(h,USER_FOLDER,(G(i={},COL_NAME,lang(USER_FOLDER)),G(i,COL_SORT,!1),G(i,COL_DECORATOR_IN,(function(e){return HtmlDecode(e)})),G(i,COL_STYLE,{whiteSpace:"nowrap"}),i)),G(h,USER_WORKSPACE,(G(s={},COL_NAME,lang(USER_WORKSPACE)),G(s,COL_SORT,!1),G(s,COL_DECORATOR_IN,(function(e){return HtmlDecode(e)})),G(s,COL_STYLE,{whiteSpace:"nowrap"}),s)),G(h,USER_ONLINE_TIME,(G(c={},COL_NAME,lang(USER_ONLINE_TIME)),G(c,COL_SORT,!0),G(c,COL_DECORATOR_IN,(function(e){var t=moment().format("X"),n=Number(t)-Number(e),a=moment(e,"X").format("llll");return"Invalid date"==a&&(a=""),n<600?r.a.createElement("span",{style:{textAlign:"left"}},r.a.createElement("i",{title:"Online: "+a,className:"fa fa-circle",style:{color:"#4caf50",cursor:"pointer"}})," ",a):r.a.createElement("span",{style:{textAlign:"left"}},r.a.createElement("i",{title:"Offline: "+a,className:"fa fa-circle",style:{color:"red",cursor:"pointer"}})," ",a)})),G(c,COL_STYLE,{whiteSpace:"nowrap"}),c)),G(h,USER_STATUS,(G(u={},COL_NAME,lang(USER_STATUS)),G(u,COL_SORT,!0),G(u,COL_DECORATOR_IN,(function(e){return e==USER_STATUS_BLOCK?r.a.createElement("b",{style:{color:"red"}},"Block"):r.a.createElement("b",{style:{color:"#4caf50"}},"Active")})),u)),G(h,USER_ACTIVE_TIME,(G(p={},COL_NAME,lang(USER_ACTIVE_TIME)),G(p,COL_SORT,!0),G(p,COL_DECORATOR_IN,(function(e){return moment(e,"X").format("llll")})),G(p,COL_STYLE,{whiteSpace:"nowrap"}),p)),G(h,USER_EXPIRED_TIME,(G(d={},COL_NAME,lang(USER_EXPIRED_TIME)),G(d,COL_SORT,!0),G(d,COL_DECORATOR_IN,(function(e){return moment(e,"X").format("llll")})),G(d,COL_STYLE,{whiteSpace:"nowrap"}),d)),G(h,"ram_limit",(G(f={},COL_NAME,"RAM Limit"),G(f,COL_SORT,!0),G(f,COL_DECORATOR_IN,(function(e,t,n){var a=n[t][USER_POD],o=0,l=n[t].ram_limit;if(void 0===l)return"";F.state.consume[a]&&(o=Math.round(100*F.state.consume[a].ram)/100);var i=o>80?"red":o>50?"orange":"green";return o>=l&&(i="red"),r.a.createElement("div",{className:"progress",style:{position:"relative",overflow:"unset",marginTop:5}},r.a.createElement("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(o,"%"),lineHeight:"unset",background:i}}," ","".concat(o,"%")),r.a.createElement("div",{style:{position:"absolute",width:"".concat(l,"%"),top:0,bottom:0,left:0,borderRight:"solid thin red"}},r.a.createElement("div",{style:{position:"absolute",right:-10,top:-10,color:"red",fontSize:8}},"".concat(l,"%"))))})),f)),G(h,"cpu_limit",(G(m={},COL_NAME,"CPU Limit"),G(m,COL_SORT,!0),G(m,COL_DECORATOR_IN,(function(e,t,n){var a=n[t][USER_POD],o=0,l=n[t].cpu_limit;if(void 0===l)return"";F.state.consume[a]&&(o=Math.round(100*F.state.consume[a].cpu)/100);var i=o>80?"red":o>50?"orange":"green";return o>=l&&(i="red"),r.a.createElement("div",{className:"progress",style:{position:"relative",overflow:"unset",marginTop:5}},r.a.createElement("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(o,"%"),lineHeight:"unset",background:i}}," ","".concat(o,"%")),r.a.createElement("div",{style:{position:"absolute",width:"".concat(l,"%"),top:0,bottom:0,left:0,borderRight:"solid thin red"}},r.a.createElement("div",{style:{position:"absolute",right:-10,top:-10,color:"red",fontSize:8}},"".concat(l,"%"))))})),m)),G(h,"hdd_limit",(G(E={},COL_NAME,"Hard disk Limit"),G(E,COL_SORT,!0),G(E,COL_DECORATOR_IN,(function(e,t,n){var a=n[t][USER_POD],o=n[t].hdd_limit;if(void 0===o)return"";var l=Math.round(10*o/1e3)/10,i=0;F.state.consume[a]&&(i=F.state.consume[a].hdd);var s=Math.round(1e3*Number(i)/Number(o))/10;return r.a.createElement("div",{className:"box_flex"},r.a.createElement("div",{className:"box_line",style:{width:50,fontSize:12},title:"".concat(l,"GB")},r.a.createElement("b",null,l,"G")," "),r.a.createElement("div",{className:"progress",style:{margin:0,flexGrow:1,height:"unset"}},r.a.createElement("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(s,"%"),lineHeight:"unset",background:s>80?"red":s>50?"orange":"green"}}," ","".concat(s,"%"))))})),E)),G(h,USER_MAX_NODE,(G(_={},COL_NAME,lang(USER_MAX_NODE)),G(_,COL_SORT,!0),G(_,COL_STYLE,{textAlign:"center"}),_)),G(h,USER_MAX_NODELAB,(G(b={},COL_NAME,lang(USER_MAX_NODELAB)),G(b,COL_SORT,!0),G(b,COL_STYLE,{textAlign:"center"}),b)),G(h,USER_NOTE,(G(y={},COL_NAME,lang(USER_NOTE)),G(y,COL_SORT,!1),G(y,COL_DECORATOR_IN,(function(e){return HtmlDecode(e)})),y)),h),F.users_struct[STRUCT_FILTERS]=(G(v={},USER_EMAIL,(G(S={},FILTER_NAME,lang(USER_EMAIL)),G(S,FILTER_TYPE,"text"),S)),G(v,USER_ROLE,(G(T={},FILTER_NAME,lang(USER_ROLE)),G(T,FILTER_TYPE,"select"),T)),G(v,USER_STATUS,(G(g={},FILTER_NAME,lang(USER_STATUS)),G(g,FILTER_TYPE,"select"),g)),G(v,USER_OFFLINE,(G(N={},FILTER_NAME,lang(USER_OFFLINE)),G(N,FILTER_TYPE,"select"),G(N,FILTER_FIXED,!0),N)),G(v,USER_NOTE,(G(O={},FILTER_NAME,lang(USER_NOTE)),G(O,FILTER_TYPE,"text"),O)),v),F.users_struct[STRUCT_EDIT]=(G(k={},USER_USERNAME,(G(I={},EDIT_NAME,lang(USER_USERNAME)),G(I,EDIT_TYPE,"text"),G(I,EDIT_NULL,!1),G(I,EDIT_MULTI,!1),I)),G(k,USER_PASSWORD,(G(R={},EDIT_NAME,lang(USER_PASSWORD)),G(R,EDIT_TYPE,"password"),G(R,EDIT_MULTI,!1),R)),G(k,USER_ROLE,(G(U={},EDIT_NAME,lang(USER_ROLE)),G(U,EDIT_TYPE,"select"),G(U,EDIT_NULL,!1),U)),G(k,USER_STATUS,(G(A={},EDIT_NAME,lang(USER_STATUS)),G(A,EDIT_TYPE,"select"),G(A,EDIT_DEFAULT,"1"),G(A,EDIT_NOTE,"Does not apply to Admin"),A)),G(k,USER_ACTIVE_TIME,(G(L={},EDIT_NAME,lang(USER_ACTIVE_TIME)),G(L,EDIT_TYPE,"date"),G(L,EDIT_FORMAT,"llll"),G(L,EDIT_NOTE,"Does not apply to Admin"),L)),G(k,USER_EXPIRED_TIME,(G(P={},EDIT_NAME,lang(USER_EXPIRED_TIME)),G(P,EDIT_TYPE,"date"),G(P,EDIT_FORMAT,"llll"),G(P,EDIT_NOTE,"Does not apply to Admin"),P)),G(k,USER_WORKSPACE,(G(D={},EDIT_NAME,lang(USER_WORKSPACE)),G(D,EDIT_TYPE,"text"),G(D,EDIT_NOTE,"Does not apply to Admin"),D)),G(k,USER_MAX_NODE,(G(C={},EDIT_NAME,lang(USER_MAX_NODE)),G(C,EDIT_TYPE,"number"),G(C,EDIT_NOTE,"Does not apply to Admin"),C)),G(k,USER_MAX_NODELAB,(G(w={},EDIT_NAME,lang(USER_MAX_NODELAB)),G(w,EDIT_TYPE,"number"),G(w,EDIT_NOTE,"Does not apply to Admin"),w)),G(k,USER_NOTE,(G(x={},EDIT_NAME,lang(USER_NOTE)),G(x,EDIT_TYPE,"textarea"),x)),k),F.users_struct[STRUCT_ROWS]=G({},ROW_FUNCS,(function(e){return"0"==e[USER_OFFLINE]?[]:[r.a.createElement("div",{key:"1",className:"button",onClick:function(){F.editUserModal.modal(),F.editUserModal.setData(e)}},r.a.createElement("i",{className:"fa fa-edit"}))]})),F.users_struct[STRUCT_TABLE]=(G(M={},DATA_TABLE_ID,USERS_TABLE),G(M,DATA_FILTERS,{}),G(M,DATA_HIDDEN_COL,{}),G(M,DATA_PERMIT_COL,F.permissionUsers()),G(M,DATA_SORT,G({},USER_ONLINE_TIME,"desc")),G(M,DATA_KEY,[USER_POD]),G(M,FLAG_FILTER_CHANGE,!0),G(M,FLAG_MULTI_SORT,!1),G(M,FLAG_RESIZABLE,!0),G(M,FLAG_SELECT_ROWS,!0),G(M,FLAG_SETTING_ROWS,!0),G(M,FLAG_EXPAND_ROWS,!1),G(M,FLAG_HEAD_ROW,!0),G(M,LINK_FILTER,"/store/public/admin/users/offFilter"),G(M,LINK_EDIT,"/store/public/admin/users/offEdit"),G(M,LINK_ADD,"/store/public/admin/users/offAdd"),G(M,LINK_DELETE,"/store/public/admin/users/offDrop"),G(M,LINK_MAPPING,"/store/public/admin/users/mapping"),M),F.state={maximum:"",UUID:"",consume:{}},F}var n,a,_;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(t,e),n=t,(a=[{key:"permissionUsers",value:function(){return Object.assign.apply(Object,H(Object.keys(this.users_struct[STRUCT_COLUMNS]).map((function(e,t){return G({},e,"Read")}))).concat(H(Object.keys(this.users_struct[STRUCT_EDIT]).map((function(e,t){return G({},e,"Write")}))),[G({},USER_OFFLINE,"Read")]))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"box_padding",style:{position:"relative"}},r.a.createElement(o.a,{ref:function(t){return e.table=t},table:this.users_struct,autoload:!0,successAdd:function(t){return e.setState({change:!0})},successEdit:function(t){return e.setState({change:!0})},successDel:function(t){return e.setState({change:!0})}},r.a.createElement("div",{className:"box_flex"},r.a.createElement(l.a,null),r.a.createElement("div",{style:{margin:"auto 0px auto auto"}},r.a.createElement("div",{className:"button",style:{padding:0},onClick:function(){return e.licenseModal.modal()}},"Maximum Accounts: ",r.a.createElement("b",null,this.state.maximum)),r.a.createElement("div",null,"Box's ID: ",r.a.createElement("b",null,this.state.UUID)),r.a.createElement("br",null))),r.a.createElement(c.a,{left:r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,null)),right:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table_function"},r.a.createElement("div",{className:"button box_flex",title:"Add Row",onClick:function(){return e.addUserModal.modal()}},r.a.createElement("i",{className:"fa fa-plus-square"})," ",lang("Add"))),r.a.createElement(E.a,null),r.a.createElement(p.a,null),r.a.createElement(d.a,null),r.a.createElement(f.a,null),r.a.createElement(m.a,null))}),r.a.createElement(i.a,{className:"table table-bordered table-resizable"}),r.a.createElement(s.a,null),r.a.createElement(w,{ref:function(t){return e.licenseModal=t}}),r.a.createElement(I,{ref:function(t){return e.addUserModal=t}}),r.a.createElement(W,{ref:function(t){return e.editUserModal=t}})))}},{key:"componentDidMount",value:function(){var e=this;this.getLimit(),this.getConsume(),this.nodeTableInteval=setInterval((function(){e.getConsume().then((function(e){}))}),15e3),this.loadOriginInteval=setInterval((function(){e.table.filter({},!1)}),6e4)}},{key:"componentWillUnmount",value:function(){this.nodeTableInteval&&clearInterval(this.nodeTableInteval),this.loadOriginInteval&&clearInterval(this.loadOriginInteval)}},{key:"getLimit",value:function(){var e=this;return axios.request({url:"/store/public/admin/users/getOffLimit",method:"post"}).then((function(t){App.loading(!1),(t=t.data).result?e.setState({maximum:t.data.limit,UUID:t.data.UUID}):error_handle(t)})).catch((function(e){console.log(e),App.loading(!1),error_handle(e)}))}},{key:"getConsume",value:function(){var e=this;return axios.request({url:"/store/public/admin/node_sessions/getConsume",method:"post"}).then((function(t){if(App.loading(!1),(t=t.data).result){var n=t.data,a={};for(var r in n){var o=n[r];a[o[NODE_SESSION_POD]]||(a[o[NODE_SESSION_POD]]={ram:0,cpu:0,hdd:0}),a[o[NODE_SESSION_POD]].ram+=Number(o[NODE_SESSION_RAM]),a[o[NODE_SESSION_POD]].cpu+=Number(o[NODE_SESSION_CPU]),a[o[NODE_SESSION_POD]].hdd+=Number(o[NODE_SESSION_HDD]),e.setState({consume:a})}}else error_handle(t)})).catch((function(e){console.log(e),App.loading(!1),error_handle(e)}))}}])&&q(n.prototype,a),_&&q(n,_),t}(a.Component);t.default=Z},729:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(13);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===l(Symbol.iterator)?function(e){return l(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":l(e)})(e)}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=c(this,u(t).call(this,e))).state={files:[],folders:[],folder:n.props.folder,workspace:"",editing:"",editing_value:""},n.parent=n.props.parent,n}var n,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(a=[{key:"setFolder",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&""!=e||(e=this.props.folder),this.setState({folder:e,editing:"",workspace:""},(function(){n&&t.loadFolder()}))}},{key:"setWorkSpace",value:function(e){var t=this;e||(e=""),this.setState({workspace:e,editing:""},(function(){t.loadFolder()}))}},{key:"getWorkSpace",value:function(){return this.state.workspace}},{key:"render",value:function(){var e=this,t=get(this.props.except,[]),n=this.state.workspace.split("/"),a=[];return n.map((function(e){""!=e&&a.push(e)})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("ol",{className:"breadcrumb",style:{margin:0,padding:"5px",position:"relative"}},r.a.createElement("li",{className:"breadcrumb-item button",onClick:function(){e.setWorkSpace("")}},r.a.createElement("i",{className:"fa fa-folder",style:{color:"#dfba49"}})," ",this.state.folder.replace(/.*\//,"")),a.map((function(t,n){var o="/"+a.slice(0,n+1).join("/");return r.a.createElement("li",{key:n,className:"breadcrumb-item button",onClick:function(){e.setWorkSpace(o)}},r.a.createElement("i",{className:"fa fa-folder",style:{color:"#dfba49"}})," ",t)})),r.a.createElement("div",{style:{position:"absolute",right:5,top:0,bottom:0,background:"inherit"},className:"box_flex"},r.a.createElement("i",{title:"Add New Folder",className:"fa fa-plus-circle button",onClick:function(){e.addNewFolder()}})))),r.a.createElement("div",{style:{paddingLeft:10,overflow:"auto",height:this.props.height?this.state.height:200}},this.state.folders.map((function(n,a){var o=n.split("/").pop();return r.a.createElement("div",{className:"folder_item",key:a,style:{display:t.includes(o)?"none":"block",position:"relative"}},r.a.createElement("i",{className:"fa fa-folder",style:{color:"#dfba49"}})," ",e.state.editing==o?r.a.createElement("input",{ref:function(t){return e.editingInput=t},type:"text",onBlur:function(){e.editFolder()},value:e.state.editing_value,onChange:function(t){e.setState({editing_value:t.target.value})}}):r.a.createElement("span",{className:"button",onClick:function(){e.setWorkSpace(e.state.workspace+"/"+o)}},o),r.a.createElement("div",{style:{position:"absolute",right:5,top:0,bottom:0,background:"inherit"},className:"box_flex folder_buttons"},r.a.createElement("i",{style:{padding:5},title:"Edit Folder",className:"fa fa-edit button",onClick:function(t){t.stopPropagation(),e.setState({editing:o,editing_value:o})}}),r.a.createElement("i",{style:{padding:5},title:"Delete Folder",className:"fa fa-close button",onClick:function(t){t.stopPropagation(),e.deleteFolder(o)}})))})),this.state.files.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("i",{className:"fa fa-file-text-o",style:{color:"gray"}})," ",e.split("/").pop())}))),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(o.a,{ref:function(t){return e.load=t},style:{position:"absolute"}}))),r.a.createElement("style",null,"\n                    .folder_item .folder_buttons{\n                        display: none;\n                    }\n                    .folder_item:hover .folder_buttons{\n                        display: flex;\n                    }\n\n                "))}},{key:"componentDidMount",value:function(){this.setWorkSpace("")}},{key:"loadFolder",value:function(){var e=this;if(this.props.link)return this.load.loading(!0),axios.request({url:this.props.link,method:"post",data:{folder:this.state.folder+this.state.workspace}}).then((function(t){t=t.data,e.load.loading(!1),t.result&&e.setState({folders:t.data.folders,files:t.data.files},(function(){e.editingInput&&e.editingInput.focus()}))})).catch((function(t){e.load.loading(!1),error_handle(t)}))}},{key:"addNewFolder",value:function(){for(var e=this,t="New Folder",n=1;void 0!==this.state.folders.find((function(e){return e.split("/").pop()==t}));)t="New Folder "+n,n++;var a=this.state.folder+this.state.workspace;return a=a.replace("/opt/unetlab/labs",""),App.loading(!0),axios.request({url:"/api/folders/add",method:"post",data:{path:a,name:t}}).then((function(n){n=n.data,App.loading(!1),"success"==n.status?(e.setState({editing:t,editing_value:t}),e.loadFolder()):error_handle(n)})).catch((function(e){App.loading(!1),error_handle(e)}))}},{key:"editFolder",value:function(){var e=this;if(this.state.editing!=this.state.editing_value){var t=this.state.folder+this.state.workspace+"/"+this.state.editing,n=this.state.folder+this.state.workspace+"/"+this.state.editing_value;return t=t.replace("/opt/unetlab/labs",""),n=n.replace("/opt/unetlab/labs",""),App.loading(!0),axios.request({url:"/api/folders/edit",method:"post",data:{path:t,new_path:n}}).then((function(t){t=t.data,App.loading(!1),"success"==t.status?e.setState({editing:"",editing_value:""},(function(){e.loadFolder()})):error_handle(t)})).catch((function(e){App.loading(!1),error_handle(e)}))}this.setState({editing:"",editing_value:""})}},{key:"deleteFolder",value:function(e){var t=this,n=this.state.folder+this.state.workspace+"/"+e;n=n.replace("/opt/unetlab/labs",""),makeQuestion("Do you want to Delete this Folder?","Yes","Cancel").then((function(e){if(e)return App.loading(!0),axios.request({url:"/api/folders/delete",method:"post",data:{path:n}}).then((function(e){e=e.data,App.loading(!1),"success"==e.status?t.setState({editing:"",editing_value:""},(function(){t.loadFolder()})):error_handle(e)})).catch((function(e){App.loading(!1),error_handle(e)}))}))}}])&&s(n.prototype,a),l&&s(n,l),t}(a.Component);t.a=d}}]);