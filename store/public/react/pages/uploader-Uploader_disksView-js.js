(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{638:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(521),l=n(522),i=n(95),c=n(91),s=n(92),u=n(209),_=n(597),E=n(523),f=n(598),d=n(524),T=n(93),p=n(94);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e){return(m="function"==typeof Symbol&&"symbol"===S(Symbol.iterator)?function(e){return S(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":S(e)})(e)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function y(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=function(e){function t(e,n){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=y(this,b(t).call(this,e,n))).table=a.context,a.state={configs:[]},a.id=Math.floor(1e4*Math.random()),a.rowData={},a}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,e),n=t,(a=[{key:"initial",value:function(){}},{key:"loadData",value:function(e){this.rowData=e;var t=JSON.parse(e[DISK_CONFIG]);t=isset(t)?Object.keys(t).map((function(e){return[e,t[e]]})):[],this.setState({configs:t}),this.modal()}},{key:"modal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"show";"hide"==e?$("#edit_row_modal"+this.id).modal("hide"):$("#edit_row_modal"+this.id).modal()}},{key:"onSaveHandle",value:function(){var e,t=this,n={};for(var a in this.state.configs)""!=this.state.configs[a][0]&&(n[this.state.configs[a][0]]=this.state.configs[a][1]);axios.request({url:"/uploader/uploader_disks/edit",method:"post",data:{data:(e={},I(e,DATA_KEY,[I({},DISK_ID,this.rowData[DISK_ID])]),I(e,DATA_EDITOR,I({},DISK_CONFIG,JSON.stringify(n))),e)}}).then((function(e){(e=e.data).result?(t.modal("hide"),t.table.filter()):Swal(e.message,e.data,"error")})).catch((function(e){console.log(e),Swal("Error",e,"error")}))}},{key:"onAddHandle",value:function(){var e=this.state.configs;e.push(["",""]),this.setState({configs:e})}},{key:"render",value:function(){var e=this,t=[],n=function(n){t.push(o.a.createElement("div",{style:{display:"flex"},key:n},o.a.createElement("input",{style:{flex:1,padding:5},type:"text",value:e.state.configs[n][0],onChange:function(t){var a=e.state.configs;a[n][0]=t.target.value,e.setState({configs:a})}}),o.a.createElement("input",{style:{flex:1,padding:5},type:"text",value:e.state.configs[n][1],onChange:function(t){var a=e.state.configs;a[n][1]=t.target.value,e.setState({configs:a})}})))};for(var a in this.state.configs)n(a);return o.a.createElement("div",{className:"modal fade",id:"edit_row_modal"+this.id},o.a.createElement("div",{className:"modal-dialog modal-lg modal-dialog-centered"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h4",{className:"modal-title"},"Disk configuration"),o.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},"×")),o.a.createElement("div",{className:"modal-body",style:{textAlign:"initial"}},t),o.a.createElement("div",{className:"modal-footer"},o.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){e.onAddHandle()}},"Add"),o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){e.onSaveHandle()}},"Save"),o.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal"},"Close")))))}}])&&D(n.prototype,a),r&&D(n,r),t}(a.Component);A.contextType=TableContext;var g=A;function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e){return(R="function"==typeof Symbol&&"symbol"===L(Symbol.iterator)?function(e){return L(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":L(e)})(e)}function N(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function K(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(e){var n,a,r,l,i,c,s,_,E,f,d,T,p,S,m,I,D,y,b,O,A,g,L,R,N,C,k,w,F,P;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(P=K(this,v(t).call(this,e))).uploader_disks_struct={},P.uploader_disks_struct[STRUCT_FILTERS]={},P.uploader_disks_struct[STRUCT_COLUMNS]=(h(d={},DISK_NAME,(h(n={},COL_NAME,lang(DISK_NAME)),h(n,COL_SORT,!0),n)),h(d,DISK_UPLOADER,(h(a={},COL_NAME,lang(DISK_UPLOADER)),h(a,COL_SORT,!0),a)),h(d,DISK_TYPE,(h(r={},COL_NAME,lang(DISK_TYPE)),h(r,COL_SORT,!0),r)),h(d,DISK_CONFIG,(h(l={},COL_NAME,lang(DISK_CONFIG)),h(l,COL_SORT,!0),h(l,COL_DECORATOR_IN,(function(e){var t=JSON.parse(e);return t=isset(t)?Object.keys(t).map((function(e){return o.a.createElement("div",{key:e,className:"box_flex"},o.a.createElement("div",{className:"box_line",style:{flex:1}},e),o.a.createElement("div",null,": "),o.a.createElement("div",{title:t[e],className:"box_line",style:{flex:2}},t[e]))})):"",o.a.createElement("div",null,t)})),l)),h(d,DISK_WEIGHT,(h(i={},COL_NAME,lang(DISK_WEIGHT)),h(i,COL_SORT,!0),i)),h(d,DISK_TOTAL,(h(c={},COL_NAME,lang(DISK_TOTAL)),h(c,COL_SORT,!0),h(c,COL_DECORATOR_IN,(function(e){if(isset(e))return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")})),h(c,COL_STYLE,{whiteSpace:"nowrap"}),c)),h(d,DISK_USED,(h(s={},COL_NAME,lang(DISK_USED)),h(s,COL_SORT,!0),h(s,COL_DECORATOR_IN,(function(e){if(isset(e))return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")})),h(s,COL_STYLE,{whiteSpace:"nowrap"}),s)),h(d,DISK_FREE,(h(_={},COL_NAME,lang(DISK_FREE)),h(_,COL_SORT,!0),h(_,COL_DECORATOR_IN,(function(e){if(isset(e))return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")})),h(_,COL_STYLE,{whiteSpace:"nowrap"}),_)),h(d,DISK_ACTIVE,(h(E={},COL_NAME,lang(DISK_ACTIVE)),h(E,COL_SORT,!0),E)),h(d,DISK_TARGET,(h(f={},COL_NAME,lang(DISK_TARGET)),h(f,COL_SORT,!0),f)),d),P.uploader_disks_struct[STRUCT_FILTERS]=(h(A={},DISK_NAME,(h(T={},FILTER_NAME,lang(DISK_NAME)),h(T,FILTER_TYPE,"text"),T)),h(A,DISK_UPLOADER,(h(p={},FILTER_NAME,lang(DISK_UPLOADER)),h(p,FILTER_TYPE,"text"),p)),h(A,DISK_TYPE,(h(S={},FILTER_NAME,lang(DISK_TYPE)),h(S,FILTER_TYPE,"select"),S)),h(A,DISK_WEIGHT,(h(m={},FILTER_NAME,lang(DISK_WEIGHT)),h(m,FILTER_TYPE,"text"),m)),h(A,DISK_TOTAL,(h(I={},FILTER_NAME,lang(DISK_TOTAL)),h(I,FILTER_TYPE,"text"),I)),h(A,DISK_USED,(h(D={},FILTER_NAME,lang(DISK_USED)),h(D,FILTER_TYPE,"text"),D)),h(A,DISK_FREE,(h(y={},FILTER_NAME,lang(DISK_FREE)),h(y,FILTER_TYPE,"text"),y)),h(A,DISK_ACTIVE,(h(b={},FILTER_NAME,lang(DISK_ACTIVE)),h(b,FILTER_TYPE,"select"),b)),h(A,DISK_TARGET,(h(O={},FILTER_NAME,lang(DISK_TARGET)),h(O,FILTER_TYPE,"select"),O)),A),P.uploader_disks_struct[STRUCT_EDIT]=(h(w={},DISK_NAME,(h(g={},EDIT_NAME,lang(DISK_NAME)),h(g,EDIT_TYPE,"text"),g)),h(w,DISK_UPLOADER,(h(L={},EDIT_NAME,lang(DISK_UPLOADER)),h(L,EDIT_TYPE,"text"),L)),h(w,DISK_TYPE,(h(R={},EDIT_NAME,lang(DISK_TYPE)),h(R,EDIT_TYPE,"select"),R)),h(w,DISK_WEIGHT,(h(N={},EDIT_NAME,lang(DISK_WEIGHT)),h(N,EDIT_TYPE,"Number"),N)),h(w,DISK_ACTIVE,(h(C={},EDIT_NAME,lang(DISK_ACTIVE)),h(C,EDIT_TYPE,"select"),C)),h(w,DISK_TARGET,(h(k={},EDIT_NAME,lang(DISK_TARGET)),h(k,EDIT_TYPE,"select"),k)),w),P.uploader_disks_struct[STRUCT_ROWS]=h({},ROW_FUNCS,(function(e){return[o.a.createElement(u.a,{key:1,rowData:e}),o.a.createElement("div",{title:"Sync Files",className:"button",onClick:function(){return P.getFiles(e)},key:2},o.a.createElement("i",{className:"fa fa-exchange"})),o.a.createElement("div",{title:"Configure",className:"button",onClick:function(){P.config.loadData(e),P.config.modal()},key:3},o.a.createElement("i",{className:"fa fa-cog"}))]})),P.uploader_disks_struct[STRUCT_TABLE]=(h(F={},DATA_TABLE_ID,UPLOADER_DISKS_TABLE),h(F,DATA_FILTERS,{}),h(F,DATA_HIDDEN_COL,{}),h(F,DATA_PERMIT_COL,P.permissionUploader_disks()),h(F,DATA_KEY,[DISK_ID]),h(F,DATA_SORT,h({},DISK_ID,"desc")),h(F,FLAG_FILTER_CHANGE,!0),h(F,FLAG_MULTI_SORT,!1),h(F,FLAG_RESIZABLE,!0),h(F,FLAG_SELECT_ROWS,!0),h(F,FLAG_SETTING_ROWS,!0),h(F,FLAG_EXPAND_ROWS,!1),h(F,FLAG_HEAD_ROW,!0),h(F,LINK_FILTER,"/uploader/uploader_disks/filter"),h(F,LINK_EDIT,"/uploader/uploader_disks/edit"),h(F,LINK_ADD,"/uploader/uploader_disks/add"),h(F,LINK_DELETE,"/uploader/uploader_disks/drop"),h(F,LINK_MAPPING,"/uploader/uploader_disks/mapping"),F),P}var n,a,S;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,e),n=t,(a=[{key:"permissionUploader_disks",value:function(){return Object.assign.apply(Object,N(Object.keys(this.uploader_disks_struct[STRUCT_COLUMNS]).map((function(e,t){return h({},e,"Read")}))).concat(N(Object.keys(this.uploader_disks_struct[STRUCT_EDIT]).map((function(e,t){return h({},e,"Write")})))))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(r.a,{ref:function(t){return e.table=t},table:this.uploader_disks_struct,autoload:!0},o.a.createElement(l.a,null),o.a.createElement(s.a,{left:o.a.createElement(E.a,null),right:o.a.createElement(o.a.Fragment,null,o.a.createElement(_.a,null),o.a.createElement(f.a,null),o.a.createElement(d.a,null),o.a.createElement(T.a,null),o.a.createElement(p.a,null))}),o.a.createElement(i.a,{className:"table table-bordered table-striped table-resizable"}),o.a.createElement(c.a,null),o.a.createElement(g,{ref:function(t){return e.config=t}})))}},{key:"getFiles",value:function(e){App.loading(!0,"Get Information..."),axios.request({url:"/uploader/uploader_disks/getFiles",method:"post",data:h({},DISK_ID,e[DISK_ID])}).then((function(e){App.loading(!1),(e=e.data).result?Swal(e.message,e.data,"success"):Swal(e.message,e.data,"error")})).catch((function(e){App.loading(!1),console.log(e),Swal("Error",e,"error")}))}}])&&C(n.prototype,a),S&&C(n,S),t}(a.Component);t.default=w}}]);